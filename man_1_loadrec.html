<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>powerd++: Manual loadrec(1)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">powerd++
   &#160;<span id="projectnumber">0.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Manual loadrec(1) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><pre>
loadrec(1)              FreeBSD General Commands Manual             loadrec(1)</pre><pre><b>NAME</b>
     <b>loadrec</b> â€“ CPU load recorder</pre><pre><b>SYNOPSIS</b>
     <b>loadrec</b> <b>-h</b>
     <b>loadrec</b> [<b>-v</b>] [<b>-d</b> <u>ival</u>] [<b>-p</b> <u>ival</u>] [<b>-o</b> <u>file</u>]</pre><pre><b>DESCRIPTION</b>
     The <b>loadrec</b> command performs a recording of the current load. The purpose
     is to reproduce this load to test different powerd(8) and powerd++(8)
     configurations under identical load conditions using loadplay(1).</pre><pre>   <b>ARGUMENTS</b>
     The following argument types can be given:</pre><pre>     <u>ival</u>    A time interval can be given in seconds or milliseconds.
                   s, ms
             An interval without a unit is treated as milliseconds.</pre><pre>     <u>file</u>    A file name.</pre><pre>   <b>OPTIONS</b>
     The following options are supported:</pre><pre>     <b>-h</b>, <b>--help</b>
             Show usage and exit.</pre><pre>     <b>-v</b>, <b>--verbose</b>
             Be verbose and produce initial diagnostics on <u>stderr</u>.</pre><pre>     <b>-d</b>, <b>--duration</b> <u>ival</u>
             The duration of the recording session, defaults to 30 seconds.</pre><pre>     <b>-p</b>, <b>--poll</b> <u>ival</u>
             The polling interval to take load samples at, defaults to 25
             milliseconds.</pre><pre>     <b>-o</b>, <b>--output</b> <u>file</u>
             The output file to write the load to.</pre><pre><b>USAGE</b> <b>NOTES</b>
     To create reproducible results set a fixed CPU frequency below the
     threshold at which the turbo mode is activated. E.g. an <b>Intel(R)</b> <b>Core(TM)</b>
     <b>i7-4500U</b> <b>CPU</b> supports the following frequency settings:</pre><pre>         &gt; sysctl dev.cpu.0.freq_levels
         dev.cpu.0.freq_levels: 2401/15000 2400/15000 2300/14088 2200/13340 2000/11888 1900/11184 1800/10495 1700/9680 1500/8372 1400/7738 1300/7119 1200/6511 1100/5789 900/4643 800/4090 768/3550</pre><pre>     Supposedly the first mode, which is off by 1 MHz, invokes the turbo mode.
     However all modes down to 1800 MHz actually invoke the turbo mode for
     this model. The only way to determine this is by benchmarking the
     steppings to find out that there is a huge performance step between 1700
     and 1800 MHz and that all the modes above 1700 MHz show the exact same
     performance (given similar thermal conditions).</pre><pre>     So in order to produce a usable measurement for this CPU the clock needs
     to be set to 1700 MHz or lower (higher is better to be able to record a
     wider range of loads):</pre><pre>         # service powerd++ stop
         Stopping powerdxx.
         Waiting for PIDS: 63574.
         # powerd++ -M1700</pre><pre>     Run <b>loadrec</b> for a brief time to test it:</pre><pre>         &gt; loadrec -d.25s
         usr.app.powerdxx.loadrec.features=1
         hw.machine=amd64
         hw.model=Intel(R) Core(TM) i7-4500U CPU @ 1.80GHz
         hw.ncpu=4
         hw.acpi.acline=1
         dev.cpu.0.freq=768
         dev.cpu.0.freq_levels=2401/15000 2400/15000 2300/14088 2200/13340 2000/11888 1900/11184 1800/10495 1700/9680 1500/8372 1400/7738 1300/7119 1200/6511 1100/5789 900/4643 800/4090 768/3550
         0 768 768 768 768 728001 0 278439 54957 10215972 753315 0 245117 7838 10270972 767662 0 241991 37110 10230545 772745 0 235729 10307 10258490
         25 768 768 768 768 0 0 0 0 3 2 0 0 0 1 0 0 0 0 3 0 0 0 0 4
         25 768 768 768 768 0 0 0 0 3 1 0 0 0 2 0 0 0 0 3 1 0 0 0 2
         25 768 768 768 768 0 0 1 0 2 1 0 2 0 0 0 0 0 0 3 0 0 1 0 2
         25 768 768 768 768 3 0 0 0 1 1 0 2 0 1 1 0 3 0 0 2 0 2 0 0
         25 768 768 768 768 0 0 0 0 3 0 0 1 0 2 0 0 0 0 3 3 0 0 0 0
         25 768 768 768 768 0 0 0 0 3 0 0 0 0 3 0 0 0 0 3 2 0 1 0 0
         25 768 768 768 768 0 0 0 0 3 0 0 0 0 3 0 0 0 0 3 2 0 1 0 0
         25 768 768 768 768 2 0 0 0 1 1 0 1 0 1 0 0 2 0 1 2 0 1 0 0
         25 768 768 768 768 0 0 0 0 4 1 0 2 0 1 0 0 0 0 4 0 0 1 0 2
         25 768 768 768 768 0 0 0 0 3 2 0 1 0 0 0 0 0 0 3 0 0 0 0 4</pre><pre>     Printing the load creates significant load itself, so for the actual
     measurement the output should be written to a file. Create your workload
     and start your measurement:</pre><pre>         &gt; loadrec -o video-session.load</pre><pre>     On the example setup <b>loadrec</b> produces a load of 0.001 (i.e. 0.1%), so its
     effect on the measurement is negligible.</pre><pre><b>SEE</b> <b>ALSO</b>
     cpufreq(4), loadplay(1), powerd(8), powerd++(8), sysctl(8)</pre><pre><b>AUTHORS</b>
     Implementation and manual by Dominic Fandrey &lt;<u>kami@freebsd.org</u>&gt;</pre><pre>FreeBSD 12.0-STABLE            4 February, 2019            FreeBSD 12.0-STABLE
</pre> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
